<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="r_brand_category" >

  <typeAlias alias="RBrandCategoryDO" type="com.mockuai.itemcenter.core.domain.RBrandCategoryDO"/>
  <resultMap id="BaseResultMap" class="RBrandCategoryDO" >
    <result column="id" property="id" jdbcType="INTEGER" />
    <result column="biz_code" property="bizCode" jdbcType="VARCHAR" />
    <result column="brand_id" property="brandId" jdbcType="BIGINT" />
    <result column="category_id" property="categoryId" jdbcType="BIGINT" />
    <result column="delete_mark" property="deleteMark" jdbcType="TINYINT" />
    <result column="delete_version" property="deleteVersion" jdbcType="VARCHAR" />
    <result column="gmt_created" property="gmtCreated" jdbcType="TIMESTAMP" />
    <result column="gmt_modified" property="gmtModified" jdbcType="TIMESTAMP" />
  </resultMap>

  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu May 12 16:27:33 CST 2016.
    -->
    id, biz_code, brand_id, category_id, delete_mark, delete_version, gmt_created, gmt_modified
  </sql>

  <select id="getRBrandCategory" resultMap="BaseResultMap" parameterClass="RBrandCategoryDO" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu May 12 16:27:33 CST 2016.
    -->
    select 
    <include refid="r_brand_category.Base_Column_List" />
    from r_brand_category
    where id = #id:INTEGER# and biz_code = #bizCode#
  </select>

  <select id="queryRBrandCategory" resultMap="BaseResultMap" parameterClass="RBrandCategoryDO" >
    select
    <include refid="r_brand_category.Base_Column_List" />
    from r_brand_category
    where biz_code = #bizCode# and delete_mark = 0
      <isNotNull property="brandId" prepend="AND">
          brand_id = #brandId#
      </isNotNull>
      <isNotNull property="categoryId" prepend="AND">
          category_id = #categoryId#
      </isNotNull>
  </select>

  <update id="deleteRBrandCategoryByBrandId" parameterClass="RBrandCategoryDO" >
    update r_brand_category
      set delete_mark = 1 ,delete_version = id ,gmt_modified = now()
    where brand_id = #brandId# and biz_code = #bizCode#
  </update>
  <insert id="addRBrandCategory" parameterClass="RBrandCategoryDO" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu May 12 16:27:33 CST 2016.
    -->
    insert into r_brand_category (id, biz_code, brand_id, category_id, delete_mark, 
      delete_version, gmt_created, gmt_modified)
    values (#id:INTEGER#, #bizCode:VARCHAR#, #brandId:BIGINT#, #categoryId:BIGINT#, 0,
      0, now(), now())
  </insert>
</sqlMap>